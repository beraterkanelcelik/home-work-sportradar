[databases]
# Use wildcard to allow any database (needed for Django test databases)
* = host=db port=5432

[pgbouncer]
# Network settings
listen_addr = 0.0.0.0
listen_port = 6432

# Authentication - use plain for edoburu image compatibility
auth_type = plain
auth_file = /etc/pgbouncer/userlist.txt

# Pooling mode - transaction is best for Django
pool_mode = transaction

# Connection pool settings
default_pool_size = 50
reserve_pool_size = 10
reserve_pool_timeout = 5
max_client_conn = 1000

# Connection lifecycle
server_idle_timeout = 600
server_lifetime = 3600
server_reset_query = DISCARD ALL;

# Logging
log_connections = 0
log_disconnections = 0
log_pooler_errors = 1

# Admin console
admin_users = postgres
